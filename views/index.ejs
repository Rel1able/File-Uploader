<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css"/>
    <script src="toggleForm.js" defer></script>
</head>
<body>
    <% if(locals.user){%>
        <h1>You are logged in</h1>
        <h2><%=user.username%></h2>
    <%}%>
    <a href="/login">Login</a>
    <a href="/sign-up">Sign up</a>
    <a href="/log-out">Log-out</a>
    <button class="upload-btn">Upload File</button>
    <a href="/create-folder">Create folder</a>
    <h1>Hello world</h1>
    <form class="upload-file-form" action="/upload-file" method="POST" enctype="multipart/form-data">
        <input type="file" name="file" required>
        <button type="submit">Add</button>
    </form>
    <% if(locals.folders){%>
        <ul>
            <h1>Folders</h1>
            <% folders.forEach((folder) => {%>
                <li>
                    <a href="/folders/<%=folder.id%>"><%= folder.foldername%></a>
                    <a href="/edit-folder/<%=folder.id%>">Edit</a>
                    <form action="/delete-folder/<%=folder.id%>" method="POST">
                        <button onClick="confirm('Are you sure that you want to delete this Folder?')">Delete</button>
                    </form>
                </li>
            <%})%>
        </ul>
    <%}%>
    <% if(locals.files){%>
        <ul>
            <h1>Files</h1>
            <% files.forEach((file) => {%>
                <li>
                    <a href="/file-details/<%=file.id%>"><%= file.originalFilename%></a>
                    <%= file.id%>
                    <form action="/delete-file/<%=file.id%>" method="POST">
                        <button>Delete File</button>
                    </form>
                </li>
           <%})%>
        </ul>
    <%}%>
</body>
</html>